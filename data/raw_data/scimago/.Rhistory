library("dplyr")
#library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
library("purrr")
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
years <- 2015:2024
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank, sjr) |>
dplyr::rename(journal_title = title) |>
dplyr::rename(issn_linking = issn) |>
tidyr::separate_longer_delim(issn_linking, delim = ", ")
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2024") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2024 = scimagojr2024 |>
filter(!is.na(sjr.best.quartile))
########## Merge all dataframes
# Ensure scimago2024 is the base
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(sjr_2024 = sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x))) |>
arrange(desc(!is.na(sjr_2024)), desc(!is.na(sjr_2023)), desc(!is.na(sjr_2022))) |>
#distinct(journal_title, .keep_all = TRUE) |>
rename(h_index = h.index)
write.csv(scimago, "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
View(scimago)
View(scimagojr_list)
View(scimagojr_list_cleaned)
View(scimagojr_list)
library("dplyr")
#library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
library("purrr")
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
years <- 2015:2024
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank, sjr) |>
dplyr::rename(journal_title = title) |>
dplyr::rename(issn_linking = issn) |>
tidyr::separate_longer_delim(issn_linking, delim = ", ")
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2024") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2024 = scimagojr2024 |>
filter(!is.na(sjr.best.quartile))
########## Merge all dataframes
# Ensure scimago2024 is the base
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(sjr_2024 = sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
View(scimago)
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x)))
View(scimago)
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
years <- 2015:2024
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank, sjr) |>
dplyr::rename(journal_title = title) |>
dplyr::rename(issn_linking = issn) |>
tidyr::separate_longer_delim(issn_linking, delim = ", ")
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2024") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile, h.index, rank, sjr)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2024 = scimagojr2024 |>
filter(!is.na(sjr.best.quartile))
########## Merge all dataframes
# Ensure scimago2024 is the base
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(sjr_2024 = sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
View(scimago)
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
View(scimago)
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(sjr_2024 = sjr.best.quartile) %>%
rename(h_index_2024 = h.index) %>%
rename(rank_2024 = rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x))) |>
#arrange(desc(!is.na(sjr_2024)), desc(!is.na(sjr_2023)), desc(!is.na(sjr_2022))) |>
#distinct(journal_title, .keep_all = TRUE) |>
rename(h_index = h.index)
write.csv(scimago, "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
fds
fdsf
)
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
years <- 2015:2024
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank, sjr) |>
dplyr::rename(journal_title = title) |>
dplyr::rename(issn_linking = issn) |>
tidyr::separate_longer_delim(issn_linking, delim = ", ")
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2024") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile, h.index, rank, sjr)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2024 = scimagojr2024 |>
filter(!is.na(sjr.best.quartile))
########## Merge all dataframes
# Ensure scimago2024 is the base
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(sjr_2024 = sjr.best.quartile) %>%
rename(h_index_2024 = h.index) %>%
rename(rank_2024 = rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x))) |>
#arrange(desc(!is.na(sjr_2024)), desc(!is.na(sjr_2023)), desc(!is.na(sjr_2022))) |>
#distinct(journal_title, .keep_all = TRUE) |>
rename(h_index = h.index)
View(scimagojr2019)
View(scimagojr2024)
View(df)
View(scimagojr2015)
View(scimagojr2018)
View(scimagojr2022)
View(scimagojr2024)
View(scimagojr2015)
View(scimagojr2015)
View(scimagojr2017)
View(scimago)
View(scimago)
View(scimago)
View(scimagojr2024)
scimago <- scimagojr2024 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank, sjr) %>%
rename(quartile_2024 = sjr.best.quartile) %>%
rename(h_index_2024 = h.index) %>%
rename(rank_2024 = rank) %>%
rename(sjr_2024 = sjr) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank) %>%
rename(!!paste0("quartile_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
rename(!!paste0("sjr_", year) := sjr) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
for (year in 2015:2023) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile, h.index, rank, sjr) %>%
rename(!!paste0("quartile_", year) := sjr.best.quartile) %>%
rename(!!paste0("h_index_", year) := h.index) %>%
rename(!!paste0("rank_", year) := rank) %>%
rename(!!paste0("sjr_", year) := sjr) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
View(scimago)
View(scimago)
