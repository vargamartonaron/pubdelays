dplyr::mutate(
issn = paste(wos_raw$`ISSN`, wos_raw$`EISSN`, sep = ", ")
) |>
dplyr::filter(`Source Type` == "Journal") |>
dplyr::rename(
asjc = `All Science Journal Classification Codes (ASJC)`,
issn_linking = issn
) |>
tidyr::separate_longer_delim(
`asjc`,
delim = "; "
) |>
tidyr::separate_longer_delim(
issn_linking,
delim = ", "
) |>
dplyr::mutate(
discipline = dplyr::case_when(
asjc == 1000 ~ "multidisciplinary",
asjc <= 1111 ~ "life_sciences",
asjc <= 1213 ~ "social_sciences_and_humanities",
asjc <= 1315 ~ "life_sciences",
asjc <= 1410 ~ "social_sciences_and_humanities",
asjc <= 1712 ~ "physical_sciences",
asjc <= 1804 ~ "social_sciences_and_humanities",
asjc <= 1913 ~ "physical_sciences",
asjc <= 2003 ~ "social_sciences_and_humanities",
asjc <= 2312 ~ "physical_sciences",
asjc <= 2406 ~ "life_sciences",
asjc <= 2614 ~ "physical_sciences",
asjc <= 2748 ~ "health_sciences",
asjc <= 2809 ~ "life_sciences",
asjc <= 2923 ~ "health_sciences",
asjc <= 3005 ~ "life_sciences",
asjc <= 3109 ~ "physical_sciences",
asjc <= 3322 ~ "social_sciences_and_humanities",
asjc <= 3616 ~ "health_sciences",
TRUE ~ "NA"
)
) |>
dplyr::mutate(
is_psych = ifelse(
(3200 <= `asjc`) &
(3207 >= `asjc`),
TRUE,
FALSE
)
) |>
dplyr::select(
"Source Title",
"issn_linking",
"Open Access Status",
"Source Type",
"asjc",
"discipline"
) |>
dplyr::group_by(issn_linking) |>
dplyr::slice(1) |>
dplyr::ungroup()
webofscience <- wos_raw |>
dplyr::mutate(
issn = paste(wos_raw$`ISSN`, wos_raw$`EISSN`, sep = ", ")
) |>
dplyr::filter(`Source Type` == "Journal") |>
dplyr::rename(
asjc = `All Science Journal Classification Codes (ASJC)`,
issn_linking = issn
) |>
tidyr::separate_longer_delim(
`asjc`,
delim = "; "
)
View(wos_raw)
View(wos_raw)
webofscience <- wos_raw |>
dplyr::mutate(
issn = paste(wos_raw$`Print-ISSN`, wos_raw$`E-ISSN`, sep = ", ")
) |>
dplyr::filter(`Source Type` == "Journal") |>
dplyr::rename(
asjc = `All Science Journal Classification Codes (ASJC)`,
issn_linking = issn
)
webofscience <- wos_raw |>
dplyr::mutate(
issn = paste(wos_raw$`Print-ISSN`, wos_raw$`E-ISSN`, sep = ", ")
) |>
dplyr::filter(`Source Type` == "Journal") |>
dplyr::rename(
asjc = `All Science Journal Classification Codes (ASJC)`,
issn_linking = issn
) |>
tidyr::separate_longer_delim(
`asjc`,
delim = "; "
) |>
tidyr::separate_longer_delim(
issn_linking,
delim = ", "
) |>
dplyr::mutate(
discipline = dplyr::case_when(
asjc == 1000 ~ "multidisciplinary",
asjc <= 1111 ~ "life_sciences",
asjc <= 1213 ~ "social_sciences_and_humanities",
asjc <= 1315 ~ "life_sciences",
asjc <= 1410 ~ "social_sciences_and_humanities",
asjc <= 1712 ~ "physical_sciences",
asjc <= 1804 ~ "social_sciences_and_humanities",
asjc <= 1913 ~ "physical_sciences",
asjc <= 2003 ~ "social_sciences_and_humanities",
asjc <= 2312 ~ "physical_sciences",
asjc <= 2406 ~ "life_sciences",
asjc <= 2614 ~ "physical_sciences",
asjc <= 2748 ~ "health_sciences",
asjc <= 2809 ~ "life_sciences",
asjc <= 2923 ~ "health_sciences",
asjc <= 3005 ~ "life_sciences",
asjc <= 3109 ~ "physical_sciences",
asjc <= 3322 ~ "social_sciences_and_humanities",
asjc <= 3616 ~ "health_sciences",
TRUE ~ "NA"
)
) |>
dplyr::mutate(
is_psych = ifelse(
(3200 <= `asjc`) &
(3207 >= `asjc`),
TRUE,
FALSE
)
) |>
dplyr::select(
"Source Title",
"issn_linking",
"Open Access Status",
"Source Type",
"asjc",
"discipline"
) |>
dplyr::group_by(issn_linking) |>
dplyr::slice(1) |>
dplyr::ungroup()
webofscience <- wos_raw |>
dplyr::mutate(
issn = paste(wos_raw$`Print-ISSN`, wos_raw$`E-ISSN`, sep = ", ")
) |>
dplyr::filter(`Source Type` == "Journal") |>
dplyr::rename(
asjc = `All Science Journal Classification Codes (ASJC)`,
issn_linking = issn
) |>
tidyr::separate_longer_delim(
`asjc`,
delim = "; "
) |>
tidyr::separate_longer_delim(
issn_linking,
delim = ", "
) |>
dplyr::mutate(
discipline = dplyr::case_when(
asjc == 1000 ~ "multidisciplinary",
asjc <= 1111 ~ "life_sciences",
asjc <= 1213 ~ "social_sciences_and_humanities",
asjc <= 1315 ~ "life_sciences",
asjc <= 1410 ~ "social_sciences_and_humanities",
asjc <= 1712 ~ "physical_sciences",
asjc <= 1804 ~ "social_sciences_and_humanities",
asjc <= 1913 ~ "physical_sciences",
asjc <= 2003 ~ "social_sciences_and_humanities",
asjc <= 2312 ~ "physical_sciences",
asjc <= 2406 ~ "life_sciences",
asjc <= 2614 ~ "physical_sciences",
asjc <= 2748 ~ "health_sciences",
asjc <= 2809 ~ "life_sciences",
asjc <= 2923 ~ "health_sciences",
asjc <= 3005 ~ "life_sciences",
asjc <= 3109 ~ "physical_sciences",
asjc <= 3322 ~ "social_sciences_and_humanities",
asjc <= 3616 ~ "health_sciences",
TRUE ~ "NA"
)
) |>
dplyr::mutate(
is_psych = ifelse(
(3200 <= `asjc`) &
(3207 >= `asjc`),
TRUE,
FALSE
)
) |>
dplyr::select(
"Source Title",
"issn_linking",
"Open Access status",
"Source Type",
"asjc",
"discipline"
) |>
dplyr::group_by(issn_linking) |>
dplyr::slice(1) |>
dplyr::ungroup()
View(webofscience)
write.csv(scimago, "/users/zsimi/pubdelays/data/processed_data/scimago.csv")
library("dplyr")
#library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
library("purrr")
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
years <- 2015:2023
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank) |>
dplyr::rename(journal_title = title) |>
tidyr::separate_longer_delim(issn, delim = ", ") |>
dplyr::rename(issn_linking = issn)
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2023") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2023 = scimagojr2023 |>
filter(!is.na(sjr.best.quartile))
########### Shorten all dataframes for easier processing (do not include for accurate results)
# for (year in years) {
#   assign(paste0("scimagojr", year), get(paste0("scimagojr", year))
#          |> slice_head(n = 1000))
# }
########## Merge all dataframes
# Ensure scimago2023 is the base
scimago <- scimagojr2023 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank) %>%
rename(sjr_2023 = sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2022) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x))) |>
arrange(desc(!is.na(sjr_2023)), desc(!is.na(sjr_2022)), desc(!is.na(sjr_2021))) |>
distinct(journal_title, .keep_all = TRUE)
scimago <- scimago |>
dplyr::select(
-Sourceid,
-Type,
-Region,
-Publisher,
-`Total Docs. (2023)`,
-`Total Docs. (3years)`,
-`Ref. / Doc.`,
-`Cites / Doc. (2years)`
) |>
dplyr::rename(journal_title = Title) |>
tidyr::separate_longer_delim(Issn, delim = ", ") |>
dplyr::rename(issn_linking = Issn) |>
dplyr::group_by(issn_linking) |>
dplyr::slice(1) |>
dplyr::ungroup()
View(scimago)
View(scimago)
View(scimago)
View(scimago)
library("dplyr")
library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
json_files <- list.files(
path = "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts",
pattern = "\\.xml\\.gz\\.json$",
all.files = TRUE,
full.names = TRUE
)
important_cols <- c(
"history",
"journal",
"pubdate",
"publication_types",
"issn_linking"
)
file <- commandArgs(trailingOnly = TRUE)
articles <- jsonlite::fromJSON(file) |>
tibble::as_tibble()
library("dplyr")
library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
json_files <- list.files(
path = "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts",
pattern = "\\.xml\\.gz\\.json$",
all.files = TRUE,
full.names = TRUE
)
important_cols <- c(
"history",
"journal",
"pubdate",
"publication_types",
"issn_linking"
)
file <- commandArgs(trailingOnly = TRUE)
articles <- jsonlite::fromJSON(file) |>
tibble::as_tibble()
articles <- jsonlite::fromJSON(json_files) |>
tibble::as_tibble()
View(articles)
View(articles)
View(articles[[22]][[2]])
View(articles)
articles$references[[1]]
View(articles)
articles$references[[2]]
articles$grant_ids[[34]]
write.csv(scimago, "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
library("dplyr")
#library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
library("purrr")
data_path <- "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts"
years <- 2015:2023
file_names <- paste0(data_path, "/scimagojr ", years, ".csv")
scimagojr_list <- lapply(file_names, read.csv2)
names(scimagojr_list) <- paste0("scimagojr", years)
lapply(scimagojr_list, function(df) {
colnames(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
names(df) <- gsub(" ", "_", tolower(names(df)))
return(df)
})
scimagojr_list <- lapply(scimagojr_list, function(df) {
df = df |>
dplyr::select(title, issn, h.index, sjr.best.quartile, rank) |>
dplyr::rename(journal_title = title) |>
tidyr::separate_longer_delim(issn, delim = ", ") |>
dplyr::rename(issn_linking = issn)
return(df)
})
scimagojr_list_cleaned <- lapply(names(scimagojr_list), function(year) {
df <- scimagojr_list[[year]]
if (year != "scimagojr2023") {
df <- df |>
dplyr::select(issn_linking, sjr.best.quartile)
}
return(df)
})
names(scimagojr_list_cleaned) <- names(scimagojr_list)
list2env(scimagojr_list_cleaned, envir = .GlobalEnv)
scimagojr2023 = scimagojr2023 |>
filter(!is.na(sjr.best.quartile))
########### Shorten all dataframes for easier processing (do not include for accurate results)
# for (year in years) {
#   assign(paste0("scimagojr", year), get(paste0("scimagojr", year))
#          |> slice_head(n = 1000))
# }
########## Merge all dataframes
# Ensure scimago2023 is the base
scimago <- scimagojr2023 %>%
select(issn_linking, sjr.best.quartile, h.index, journal_title, rank) %>%
rename(sjr_2023 = sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
# Merge remaining years
for (year in 2015:2022) {
df <- get(paste0("scimagojr", year)) %>%
select(issn_linking, sjr.best.quartile) %>%
rename(!!paste0("sjr_", year) := sjr.best.quartile) %>%
distinct(issn_linking, .keep_all = TRUE)  # Remove duplicates
scimago <- left_join(scimago, df, by = "issn_linking")
}
print("Merge successful")
unwanted_values <- c("-", "NA", "_", "")
scimago <- scimago |>
mutate(across(everything(), ~ if_else(.x %in% unwanted_values, NA, .x))) |>
arrange(desc(!is.na(sjr_2023)), desc(!is.na(sjr_2022)), desc(!is.na(sjr_2021))) |>
distinct(journal_title, .keep_all = TRUE)
write.csv(scimago, "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
View(scimago)
View(scimagojr2018)
library("dplyr")
library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
json_files <- list.files(
path = "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts",
pattern = "\\.xml\\.gz\\.json$",
all.files = TRUE,
full.names = TRUE
)
important_cols <- c(
"history",
"journal",
"pubdate",
"publication_types",
"issn_linking"
)
file <- commandArgs(trailingOnly = TRUE)
articles <- jsonlite::fromJSON(json_files) |>
tibble::as_tibble()
if (!all(important_cols %in% colnames(articles))) {
message("Skipping file ", file, ": Missing important columns")
stop()
}
scimago <- readr::read_csv2("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scriptsscimago.csv")
library("dplyr")
library("glue")
library("jsonlite")
library("fuzzyjoin")
library("tidyr")
library("readr")
library("lubridate")
library("stringr")
json_files <- list.files(
path = "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts",
pattern = "\\.xml\\.gz\\.json$",
all.files = TRUE,
full.names = TRUE
)
important_cols <- c(
"history",
"journal",
"pubdate",
"publication_types",
"issn_linking"
)
file <- commandArgs(trailingOnly = TRUE)
articles <- jsonlite::fromJSON(json_files) |>
tibble::as_tibble()
if (!all(important_cols %in% colnames(articles))) {
message("Skipping file ", file, ": Missing important columns")
stop()
}
scimago <- readr::read_csv2("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
webofscience <- readr::read_csv("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/web_of_science.csv")
scimago <- readr::read_csv2("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/scimago.csv")
webofscience <- readr::read_csv("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/wos.csv")
doaj <- readr::read_csv("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/doaj.csv")
source("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/process_data.R", echo=TRUE)
source("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/process_data.R", echo=TRUE)
View(scimago)
joined_doaj <- articles |>
dplyr::left_join(
scimago, join_by("issn_linking"), suffix = c("", "_scimago")
)
joined_doaj <- articles |>
dplyr::left_join(
scimago, join_by("issn_linking"), suffix = c("", "_scimago")
) |>
dplyr::left_join(
webofscience, join_by("issn_linking"), suffix = c("", "_wos")
)
View(webofscience)
source("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/process_data.R", echo=TRUE)
source("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/process_data.R", echo=TRUE)
View(filters)
readr::write_csv(filters, glue::glue("{file}_filters.csv"))
readr::write_tsv(data, glue::glue("{json_files}.tsv"))
readr::write_csv(filters, glue::glue("{json_files}_filters.csv"))
readr::write_tsv(data, test_folder/glue::glue("{json_files}.tsv"))
readr::write_tsv(data, "D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/test_folder/"glue::glue("{json_files}.tsv"))
readr::write_tsv(data, glue::glue("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/temp_folder/{json_files}.tsv"))
readr::write_tsv(data, glue::glue("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/test_folder/{json_files}.tsv"))
readr::write_tsv(data, glue::glue("/test_folder/{json_files}.tsv"))
source("D:/University/ELTE/MetaScienceLab/Publication delay/temporary scripts/process_data.R", echo=TRUE)
readr::write_tsv(data, glue::glue("test_folder/{json_files}.tsv"))
readr::write_tsv(data, glue::glue("test_folder/{json_files}.tsv"))
readr::write_tsv(data, glue::glue("{json_files}.tsv"))
